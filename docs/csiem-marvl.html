<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5 CSIEM : marvl | The Cockburn Sound Integrated Ecosystem Model</title>
<meta name="author" content="AED">
<meta name="description" content="5.1 Overview The subsequent chapters detail the nature of the model setup, and also focus on specific areas of model assessment. In general, the approach to assess the model loosely follows the...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="5 CSIEM : marvl | The Cockburn Sound Integrated Ecosystem Model">
<meta property="og:type" content="book">
<meta property="og:description" content="5.1 Overview The subsequent chapters detail the nature of the model setup, and also focus on specific areas of model assessment. In general, the approach to assess the model loosely follows the...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="5 CSIEM : marvl | The Cockburn Sound Integrated Ecosystem Model">
<meta name="twitter:description" content="5.1 Overview The subsequent chapters detail the nature of the model setup, and also focus on specific areas of model assessment. In general, the approach to assess the model loosely follows the...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.0/transition.js"></script><script src="libs/bs3compat-0.5.0/tabs.js"></script><script src="libs/bs3compat-0.5.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/panelset-0.2.6/panelset.css" rel="stylesheet">
<script src="libs/panelset-0.2.6/panelset.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">The Cockburn Sound Integrated Ecosystem Model</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li class="book-part">ORGANISATION</li>
<li><a class="" href="overview.html"><span class="header-section-number">2</span> Overview</a></li>
<li><a class="" href="csiem-data.html"><span class="header-section-number">3</span> CSIEM : data</a></li>
<li><a class="" href="csiem-model.html"><span class="header-section-number">4</span> CSIEM : model</a></li>
<li><a class="active" href="csiem-marvl.html"><span class="header-section-number">5</span> CSIEM : marvl</a></li>
<li class="book-part">SCIENCE APPLICATIONS</li>
<li><a class="" href="ocean-climatology.html"><span class="header-section-number">6</span> Resolving Perth Waters Ocean Climatology</a></li>
<li><a class="" href="hydrodynamics.html"><span class="header-section-number">7</span> Hydrodynamics</a></li>
<li><a class="" href="references.html">References</a></li>
<li class="book-part">APPENDICIES</li>
<li><a class="" href="a-data-catalogue.html">A : Data Catalogue</a></li>
<li><a class="" href="b-results-archive.html">B : Results Archive</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="csiem-marvl" class="section level1" number="5">
<h1>
<span class="header-section-number">5</span> CSIEM : marvl<a class="anchor" aria-label="anchor" href="#csiem-marvl"><i class="fas fa-link"></i></a>
</h1>
<p><br></p>
<div id="overview-2" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> Overview<a class="anchor" aria-label="anchor" href="#overview-2"><i class="fas fa-link"></i></a>
</h2>
<p>The subsequent chapters detail the nature of the model setup, and also focus on specific areas of model assessment. In general, the approach to assess the model loosely follows the CSPS framework of Hipsey et al. (2020). The framework considers:</p>
<ul>
<li>
<em>Level 0</em>: conceptual evaluation; the conceptual basis for each of the hydrodynamic regimes, water quality variables, biogeochemical reactions, and habitat models as based on scientific review and data inspection;</li>
<li>
<em>Level 1</em>: traditional assessment of simulated state variables; a range of metrics is used for a large number of predicted variable and different sites.</li>
<li>
<em>Level 2</em>: evaluation of process rates; and</li>
<li>
<em>Level 3</em>: benchmarking system-level patterns and emergent properties; this is evaluated by assessments related to hydrodynamic regimes, nutrient budget analysis, nutrient cycling pathway analysis, and assessment of the relationship between the areas of habitat and water conditions.</li>
</ul>
<p>The above assessments are supported by an analytics toolbox that co-orindates that above scripts and necessary data and workflows. In particular, <code>csiem-marvl</code> refers to the Cockburn Sound Integrated Ecosystem Model - <strong>Model Assessment, Reporting and Visualisation Library</strong>, which is a collection of scripts and tools for assisting users visualise model outputs and observational datasets, and for evaluating the model’s performance. <code>csiem-marvl</code> uses the more generic <code>aed-marvl</code> package for core functions for plotting and evaluating model output, in addition to a suite of custom python and matlab scripts developed for specific types of analyses. The MARVL “toolkit” can be operted locally, or via the SEAF-CS cloud-based “<strong>databricks</strong>” platform.</p>
<p>The specific data available for validation and the assessment metrics are extensive and summarised below. The level of model uncertainty is discussed in terms of how much confidence is in the current generation of model outputs for the purposes of defining model reliability.</p>
<p><br></p>
</div>
<div id="the-model-assessment-reporting-and-visualisation-library-marvl" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> The Model Assessment, Reporting and Visualisation Library (MARVL)<a class="anchor" aria-label="anchor" href="#the-model-assessment-reporting-and-visualisation-library-marvl"><i class="fas fa-link"></i></a>
</h2>
<p>The publicly available GitHub repository called <a href="https://github.com/AquaticEcoDynamics/csiem-marvl"><code>csiem-marvl</code></a> contains a wide variety of scripts and functions that are used to post-process and visualise model output. Scripts that have been specifically developed for this project are contained within the <code>csiem-marvl</code> repository. Plotting and model processing types include:</p>
<ul>
<li>Time-series plotting;</li>
<li>Transect plotting;</li>
<li>Model animation creation;</li>
<li>Error assessment;</li>
<li>Wave model plotting;</li>
<li>Habitat mapping (e.g., Seagrass &amp; Fish HSI processing and mapping)</li>
<li>Scenario comparison and “DelMap” plotting;</li>
<li>Nutrient budget assessments.</li>
</ul>
<p>In particular, <code>AEDmarvl_plot_timeseries</code> and <code>AEDmarvl_plot_transect</code> are the main functions that are frequently used. The <code>AEDmarvl_plot_timeseries</code> function uses data and gis files stored in the csiem-marvl repository, in addition to model output to create timeseries plots of the model (averaged within a polygon region) compared against field data. The plotting function will also automatically calculate a range of error statistics based on model output and field measured data.</p>
<div class="text-image">
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:csiem-plottfvpolygon"></span>
<img src="images/cdm/0005_CS_South.png" alt="Example output from plottfv_polygon with error matrix" width="100%"><p class="caption">
Figure 5.1: Example output from plottfv_polygon with error matrix
</p>
</div>
</div>
<p><code>AEDmarvl_plot_transect</code> can also be found in the <code>csiem-marvl</code> repository. This plots model data extracted along a transect line during a specified plotting period, and compares against the range of field data found within that period.</p>
<div class="text-image">
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:csiem-plottfvtransect"></span>
<img src="images/cdm/2021-09-01_2022-01-01_Surface.png" alt="Example output from plottfv_transect with distance from Goolwa Barrage (km) along the x-axis" width="100%"><p class="caption">
Figure 5.2: Example output from plottfv_transect with distance from Goolwa Barrage (km) along the x-axis
</p>
</div>
</div>
<p>The <code>csiem-marvl</code> analysis library also houses scripts and functions for:</p>
<ul>
<li>Nutrient Budgeting;</li>
<li>Stacked Area Transect;</li>
<li>Curtain plotting;</li>
<li>Mesh manipulation tools;</li>
<li>Data exports;</li>
<li>Sheet plotting and animation tools;</li>
</ul>
<p>Some of the example plots from previous research projects using the marvl-similar scripts are shown below illustrating their capability and presentations. The <code>csiem-marvl</code> analysis library is currently under development to meet the needs with more data collection and modelling progress, such as sediment profiling and habitat index.</p>
<div class="text-image">
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:csiem-stackedarea"></span>
<img src="images/cdm/stackedarea.png" alt="Example output from plottfv_transect_StackedArea with distance along the x-axis" width="100%"><p class="caption">
Figure 5.3: Example output from plottfv_transect_StackedArea with distance along the x-axis
</p>
</div>
</div>
<div class="text-image">
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:csiem-nutrientbudget"></span>
<img src="images/cdm/nutrient_budget_1.png" alt="Example Nutrient Budgeting output of a polygon region." width="100%"><p class="caption">
Figure 5.4: Example Nutrient Budgeting output of a polygon region.
</p>
</div>
</div>
</div>
<div id="model-assessment-summary" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Model assessment summary<a class="anchor" aria-label="anchor" href="#model-assessment-summary"><i class="fas fa-link"></i></a>
</h2>
<div id="summary-of-validation-data-set" class="section level3" number="5.3.1">
<h3>
<span class="header-section-number">5.3.1</span> Summary of validation data-set<a class="anchor" aria-label="anchor" href="#summary-of-validation-data-set"><i class="fas fa-link"></i></a>
</h3>
<p>The field observation data available for the model validation and assessment include a diversity of historical data (collected pre 2021), and a large volume of data generated by recent monitoring and WAMSI-Westport research projects. Relevant data for validation include:</p>
<ul>
<li>
<em>In situ</em> water quality sensors; high frequency measurements at fixed locations.</li>
<li>Water quality grab samples.</li>
<li>Biotic surveys.</li>
<li>Strategic experimental data.</li>
</ul>
<p>All the data relevant to model calibration and validation are included in the <em>CSIEM Data Catalogue</em> and detailed in <a href="Appendix%20A%20:%20Data%20Catalogue">Appendix A</a>; see also Chapter 3. The data spans a wide range of locations and time-periods; however the primary model assessment generally focuses on the most intense period of monitoring between 2022 and 2024. Long-term assessments are also undertaken for different versions of the model by comparing against the long-term monitoring data set.</p>
</div>
<div id="performance-assessment-metrics" class="section level3" number="5.3.2">
<h3>
<span class="header-section-number">5.3.2</span> Performance assessment metrics<a class="anchor" aria-label="anchor" href="#performance-assessment-metrics"><i class="fas fa-link"></i></a>
</h3>
<p>The modelling results are compared against historical data collected within Cockburn Sound (where available), using both traditional statistical metrics of model error, and other metrics relevant to model performance. The approach is applied to each model generation with the aim to identify areas where the model is accurate, and areas for further improvement and ongoing calibration effort.</p>
<p><strong>Error metrics</strong> : Initially, the model performance in predicting a range of relevant variables including salinity, temperature, nitrogen, phosphorus and total chlorophyll-a are assessed with a set of statistical metrics, and the calculations of statistical metrics was performed for each observation site where the number of field observations was &gt;10 in the assessment period.</p>
<p>The core statistical metrics considered consist of:</p>
<ul>
<li>
<span class="math inline">\(r\)</span>: regression coefficient, Varies between -1 and 1, with a score of 1 indicating the model varies perfectly with the observations and a negative score indicating the model varies inversely with the observations. A consistent bias may be present even when high score of r is obtained.</li>
<li>
<span class="math inline">\(BIAS\)</span>: bias of average prediction to the average observation during the assessing period. This method presents a magnitude for the discrepancy between the model results and the observational data.</li>
<li>
<span class="math inline">\(MAE\)</span>: mean absolute error: Similar to RMSE except absolute value is used. This reduces the bias towards large events. Values near zero indicate good model skill.</li>
<li>
<span class="math inline">\(RMS\)</span>: root mean squared error, Measures the mean magnitude, but not direction, of the difference between model data and observations, and hence can be used to measure bias. Values near zero are desirable. This method is not affected by cancellation of negative and positive errors, but squaring the data may cause bias towards large events.</li>
<li>
<span class="math inline">\(nash\)</span>: the Nash-Sutcliffe metric (also called <span class="math inline">\(NSE\)</span> or <span class="math inline">\(MEF\)</span> is a matrix of modelling efficiency, measures the mean magnitude of the difference between model data and observations. This method compares the performance of the model to that only uses the mean of the observed data. A value of 1 would indicate a perfect model, while a value of zero indicates performance similar to simply using the mean of observed data.</li>
</ul>
<p><strong>Seasonality</strong> : The model results are assessed in terms of the degree of seasonal fluctuation, as seen in the field data. Whilst this is captured in the error metrics (e.g. R, the visual assessment can assess timing issues related with seasonal peaks.</p>
<p><strong>Transects</strong> : The model results are assessed in terms of the seasonal mean along the length of the domain (longitudinal transect). The transect analysis allows a system wide scale assessment of conditions, that smooths out noise and local variability in the field and model predictions.</p>
<p><strong>Advanced measures</strong> : The model results were finally assessed considered that partitioning of nutrients in terms of inorganic vs organic, and other expected measures.</p>
</div>
<div id="assessment-periods" class="section level3" number="5.3.3">
<h3>
<span class="header-section-number">5.3.3</span> Assessment periods<a class="anchor" aria-label="anchor" href="#assessment-periods"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>
<em>Historical period</em>: 1970-2010: initial assessment prior to availability of WAMSI research project data;</li>
<li>
<em>Recent period</em>: 2011-2020: initial assessment prior to availability of WAMSI research project data;</li>
<li>
<em>Focus period</em>: 2021-2023: initial calibrated against the intensive field sampling and observations obtained from different components of the WAMSI research project;</li>
<li>
<em>Long-term performance</em>: 2013 – 2024: calibrated against the long-term water quality data collected from the routine measurements, as well as from the WAMSI research project.</li>
</ul>
<p><br></p>
</div>
<div id="model-confidence-reporting" class="section level3" number="5.3.4">
<h3>
<span class="header-section-number">5.3.4</span> Model confidence reporting<a class="anchor" aria-label="anchor" href="#model-confidence-reporting"><i class="fas fa-link"></i></a>
</h3>
<p>Based on the above assessment we evaluate confidence in the model by assigning each variable to the following categories:</p>
<ul>
<li>Good</li>
<li>Acceptable, and</li>
<li>Caution.</li>
</ul>
<p>This confidence evaluation, considers:</p>
<ul>
<li>Quality of observed data, which is influenced by field and laboratory data limitations, methodologies, processes and protocols.</li>
<li>Error metric scores relative to what is typically reported in the literature for water quality models (e.g., Arhonditsis and Brett, 2004).</li>
<li>Ability of the CSIEM to capture the mean of an indicator and its spatial gradient and seasonality.</li>
<li>Partitioning of water quality constituents within different ecosystem pools.</li>
<li>Natural variability of the indicator at different temporal scales (i.e. sub-daily to seasonal).</li>
</ul>
<p><br></p>
</div>
</div>
<div id="marvl-viewer" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> MARVL-VIEWER<a class="anchor" aria-label="anchor" href="#marvl-viewer"><i class="fas fa-link"></i></a>
</h2>
<p>The model assessment considered ~70 assessment polygons, for 6 years for multiple (&gt;20) variables. To assist with reviewing these plots, readers to browse <a href="https://csiem-mv.seaf.org.au"><span style="color: blue">via the <strong>MARVL-VIEWER</strong> web-app</span></a>.</p>
<p><br></p>
</div>
<div id="databricks-cloud-analytics" class="section level2" number="5.5">
<h2>
<span class="header-section-number">5.5</span> DATABRICKS cloud analytics<a class="anchor" aria-label="anchor" href="#databricks-cloud-analytics"><i class="fas fa-link"></i></a>
</h2>
<p>TBC</p>

</div>
</div>



<script>
var img = document.body.getElementsByTagName("img");
var i = 0;
while (i < img.length) {
    img[i].setAttribute("data-action", "zoom");
    i++;
}
</script><script src="https://cdn.jsdelivr.net/npm/zoom-vanilla.js/dist/zoom-vanilla.min.js"></script><link href="https://cdn.jsdelivr.net/npm/zoom-vanilla.js/dist/zoom.css" rel="stylesheet">
<div class="chapter-nav">
<div class="prev"><a href="csiem-model.html"><span class="header-section-number">4</span> CSIEM : model</a></div>
<div class="next"><a href="ocean-climatology.html"><span class="header-section-number">6</span> Resolving Perth Waters Ocean Climatology</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#csiem-marvl"><span class="header-section-number">5</span> CSIEM : marvl</a></li>
<li><a class="nav-link" href="#overview-2"><span class="header-section-number">5.1</span> Overview</a></li>
<li><a class="nav-link" href="#the-model-assessment-reporting-and-visualisation-library-marvl"><span class="header-section-number">5.2</span> The Model Assessment, Reporting and Visualisation Library (MARVL)</a></li>
<li>
<a class="nav-link" href="#model-assessment-summary"><span class="header-section-number">5.3</span> Model assessment summary</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#summary-of-validation-data-set"><span class="header-section-number">5.3.1</span> Summary of validation data-set</a></li>
<li><a class="nav-link" href="#performance-assessment-metrics"><span class="header-section-number">5.3.2</span> Performance assessment metrics</a></li>
<li><a class="nav-link" href="#assessment-periods"><span class="header-section-number">5.3.3</span> Assessment periods</a></li>
<li><a class="nav-link" href="#model-confidence-reporting"><span class="header-section-number">5.3.4</span> Model confidence reporting</a></li>
</ul>
</li>
<li><a class="nav-link" href="#marvl-viewer"><span class="header-section-number">5.4</span> MARVL-VIEWER</a></li>
<li><a class="nav-link" href="#databricks-cloud-analytics"><span class="header-section-number">5.5</span> DATABRICKS cloud analytics</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>The Cockburn Sound Integrated Ecosystem Model</strong>" was written by AED. It was last built on 09-November-2025.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
